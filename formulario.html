<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/Logo-page.ico">
    <title>Ejercicio 5</title>
</head>

<body>
    <h1>Registro de usuario</h1>
    <form action="#" method="post">
        <fieldset>
            <legend>Información Personal</legend>
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required><br><br>
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" name="apellido" required><br><br>
            <label for="fechaNacimiento">Fecha de Nacimiento:</label>
            <input type="date" id="fechaNacimiento" name="fechaNacimiento" required><br><br>
            <legend>Género:</legend>
            <input type="radio" id="masculino" name="genero" value="Masculino" required>
            <label for="masculino">Masculino</label><br>
            <input type="radio" id="femenino" name="genero" value="Femenino">
            <label for="femenino">Femenino</label><br>
            <input type="radio" id="otro" name="genero" value="Otro">
            <label for="otro">Otro</label><br><br>
        </fieldset>

        <fieldset>
            <legend>Información de Contacto</legend>
            <label for="email">Correo Electrónico:</label>
            <input type="email" id="email" name="email" required><br><br>
            <label for="telefono">Número de Teléfono:</label>
            <input type="tel" id="telefono" name="telefono" required><br><br>

            <label for="provincia">Provincia:</label>
            <select id="provincia" name="provincia" required>
                <option value="">Cargando provincias...</option>
            </select><br><br>

            <label for="municipio">Municipio:</label>
            <select id="municipio" name="municipio" required disabled>
                <option value="">Seleccioná una provincia primero</option>
            </select><br><br>
            <label for="calle">Calle:</label>
            <input type="text" id="calle" name="calle" required><br><br>

            <label for="altura">Altura:</label>
            <input type="number" id="altura" name="altura" required><br><br>
        </fieldset>
    </form>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        let datosProvincias = [];
        let datosMunicipios = [];

        const provinciaSelect = document.getElementById("provincia");
        const municipioSelect = document.getElementById("municipio");

        // Paso 1: cargar provincias
        fetch("provincias.json") // si lo tenés local
            .then(response => response.json())
            .then(data => {
                datosProvincias = data.provincias;
                provinciaSelect.innerHTML = '<option value="">Seleccioná una provincia</option>';
                datosProvincias.forEach(prov => {
                    const option = document.createElement("option");
                    option.value = prov.id;
                    option.textContent = prov.nombre;
                    provinciaSelect.appendChild(option);
                });
            })
            .catch(error => console.error("Error cargando provincias:", error));

        // Paso 2: cargar municipios
        fetch("municipios.json") // si lo tenés local
            .then(response => response.json())
            .then(data => {
                datosMunicipios = data.municipios;
            })
            .catch(error => console.error("Error cargando municipios:", error));

        // Paso 3: escuchar selección de provincia
        provinciaSelect.addEventListener("change", () => {
            const provinciaId = provinciaSelect.value;
            municipioSelect.innerHTML = '<option value="">Seleccioná un municipio</option>';

            if (!provinciaId || datosMunicipios.length === 0) {
                municipioSelect.disabled = true;
                return;
            }

            const municipiosFiltrados = datosMunicipios.filter(
                m => m.provincia && m.provincia.id === provinciaId
            );

            municipiosFiltrados.forEach(muni => {
                const option = document.createElement("option");
                option.value = muni.id;
                option.textContent = muni.nombre;
                municipioSelect.appendChild(option);
            });

            municipioSelect.disabled = municipiosFiltrados.length === 0;
        });
    });
</script>

</body>

</html>
